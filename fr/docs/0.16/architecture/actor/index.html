<!doctype html>
<html class="docs-version-0.16" lang="fr" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.15">
<link rel="search" type="application/opensearchdescription+xml" title="CosmWasm Documentation" href="/fr/opensearch.xml"><title data-react-helmet="true">Actor Model | CosmWasm Documentation</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://docs.cosmwasm.com/fr/docs/0.16/architecture/actor"><meta data-react-helmet="true" name="docsearch:language" content="fr"><meta data-react-helmet="true" name="docsearch:version" content="0.16"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-docs-0.16"><meta data-react-helmet="true" property="og:title" content="Actor Model | CosmWasm Documentation"><meta data-react-helmet="true" name="description" content="The actor model is a design pattern, often used in to build reliable,"><meta data-react-helmet="true" property="og:description" content="The actor model is a design pattern, often used in to build reliable,"><link data-react-helmet="true" rel="icon" href="/fr/img/favicon.svg"><link data-react-helmet="true" rel="canonical" href="https://docs.cosmwasm.com/fr/docs/0.16/architecture/actor"><link data-react-helmet="true" rel="alternate" href="https://docs.cosmwasm.com/docs/0.16/architecture/actor" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.cosmwasm.com/fr/docs/0.16/architecture/actor" hreflang="fr"><link data-react-helmet="true" rel="alternate" href="https://docs.cosmwasm.com/docs/0.16/architecture/actor" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/fr/assets/css/styles.293cb3ed.css">
<link rel="preload" href="/fr/assets/js/runtime~main.06714549.js" as="script">
<link rel="preload" href="/fr/assets/js/main.0d6a99d9.js" as="script">
</head>
<body>
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?e("light"):e("dark")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbarHideable_aKYr"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://docs.cosmwasm.com/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/fr/img/logo.svg" alt="CosmWasm" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/fr/img/logo_dark.svg" alt="CosmWasm" class="themedImage_W2Cr themedImage--dark_oUvU"></div></a><a class="navbar__item navbar__link navbar__link--active" href="/fr/docs/0.16/">Docs</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" class="navbar__link">Learn</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/fr/dev-academy/intro">Dev Academy</a></li><li><a class="dropdown__link" href="/fr/tutorials/hijack-escrow/intro">Tutorials</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" class="navbar__link">dApps</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/fr/cw-plus/0.9.0/overview">cw-plus</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" class="navbar__link" docspluginid="ecosystem">Ecosystem</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/fr/ecosystem/overview">Overview</a></li><li><a class="dropdown__link" href="/fr/ecosystem/jobs">Jobs</a></li><li><a class="dropdown__link" href="/fr/ecosystem/testnets/build-requirements">Testnets</a></li><li><a class="dropdown__link" href="/fr/ecosystem/hall-of-fame">Hall of Fame</a></li><li><a class="dropdown__link" href="/fr/ecosystem/media/assets">Media</a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" href="/fr/docs/0.16/">0.16</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/fr/docs/1.0/architecture/actor">1.0</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/fr/docs/0.16/architecture/actor">0.16</a></li><li><a class="dropdown__link" href="/fr/docs/0.14/architecture/actor">0.14</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__link"><span><svg viewBox="0 0 20 20" width="20" height="20" aria-hidden="true" class="iconLanguage_dNtB"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>FranÃ§ais</span></span></a><ul class="dropdown__menu"><li><a href="/docs/0.16/architecture/actor" target="_self" rel="noopener noreferrer" class="dropdown__link">English</a></li><li><a href="/fr/docs/0.16/architecture/actor" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">FranÃ§ais</a></li></ul></div><div class="toggle_Pssr toggle_TdHA toggleChecked_cnQY toggleDisabled_jDku"><div class="toggleTrack_SSoT" role="button" tabindex="-1"><div class="toggleTrackCheck_XobZ"><span class="toggleIcon_eZtF">ðŸŒœ</span></div><div class="toggleTrackX_YkSC"><span class="toggleIcon_eZtF">ðŸŒž</span></div><div class="toggleTrackThumb_uRm4"></div></div><input type="checkbox" checked="" class="toggleScreenReader_JnkT" aria-label="Switch between dark and light mode"></div><div class="searchBox_qEbK"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y sidebarWithHideableNavbar_FoYL"><a href="https://docs.cosmwasm.com/" target="_blank" rel="noopener noreferrer" tabindex="-1" class="sidebarLogo_FJUI"><img src="/fr/img/logo.svg" alt="CosmWasm" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/fr/img/logo_dark.svg" alt="CosmWasm" class="themedImage_W2Cr themedImage--dark_oUvU"></a><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/fr/docs/0.16/">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/fr/docs/0.16/getting-started/intro">Getting Started</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/fr/docs/0.16/getting-started/intro">Your First Contract</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/fr/docs/0.16/getting-started/installation">Installation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/fr/docs/0.16/getting-started/setting-env">Setting Up Environment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/fr/docs/0.16/getting-started/compile-contract">Downloading and Compiling Contract</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/fr/docs/0.16/getting-started/interact-with-contract">Uploading and Interacting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/fr/docs/0.16/getting-started/next-steps">Next Steps</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_VCh3" aria-current="page" href="/fr/docs/0.16/architecture/multichain">Architecture</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/fr/docs/0.16/architecture/multichain">What are Multi-Chain Contracts?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/fr/docs/0.16/architecture/actor">Actor Model</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/fr/docs/0.16/architecture/addresses">Names and Addresses</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/fr/docs/0.16/architecture/query">Querying</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/fr/docs/0.16/architecture/serialization">Serialization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/fr/docs/0.16/architecture/composition">Contract Composition</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/fr/docs/0.16/architecture/smart-contracts">Comparison with Solidity Contracts</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/fr/docs/0.16/SEMANTICS">Contract Semantics</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/fr/docs/0.16/ibc/overview">IBC</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/fr/docs/0.16/COMPATIBILITY">Compatibility</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/fr/docs/0.16/MIGRATING">Migrating Contracts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/fr/docs/0.16/CHANGELOG">CHANGELOG</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_cwdi"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_xORG"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->CosmWasm Documentation<!-- --> <b>0.16</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/fr/docs/1.0/architecture/actor">latest version</a></b> (<!-- -->1.0<!-- -->).</div></div><div class="docItemContainer_vinB"><article><span class="theme-doc-version-badge badge badge--secondary">Version: <!-- -->0.16</span><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Actor Model for Contract Calls</h1><p>The <a href="https://en.wikipedia.org/wiki/Actor_model" target="_blank" rel="noopener noreferrer">actor model</a> is a design pattern, often used in to build reliable,
distributed systems. The fundamental points, in my opinion, are that each <code>Actor</code> has exclusive access to its own
internal state, and that <code>Actors</code> cannot call each other directly, only dispatch messages over some <code>Dispatcher</code> (that
maintains the state of the system and can map addresses to code and storage). Fundamentally the <code>Actor</code> pattern can be
encapsulated in such an interface:</p><div class="codeBlockContainer_I0IT language-rust theme-code-block"><div class="codeBlockContent_wNvx rust"><pre tabindex="0" class="prism-code language-rust codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">pub trait Actor {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  fn handle(msgPayload: &amp;[u8]) -&gt; Vec&lt;Msg&gt;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">pub struct Msg {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  pub destination: Vec&lt;u8&gt;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  pub payload: Vec&lt;u8&gt;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>This is the basic model that was used to model contracts in CosmWasm. You can see the same influence in the
function:</p><div class="codeBlockContainer_I0IT language-rust theme-code-block"><div class="codeBlockContent_wNvx rust"><pre tabindex="0" class="prism-code language-rust codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">pub fn handle&lt;T: Storage&gt;(store: &amp;mut T, params: Params, msg: Vec&lt;u8&gt;) -&gt; Result&lt;Response&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Response contains <code>Vec&lt;Msg&gt;</code> and a little metadata. <code>store</code> is access to the contract&#x27;s internal state. And <code>params</code> is some
global immutable context. So, just a little bit of syntax around the same design. From this basic design, a few other
useful aspects can be derived:</p><p>First, there is a <strong>loose coupling</strong> between Actors, limited to the format of the data packets (the recipient must
support a superset of what you send). There is no complex API or function pointers to pass around. This is much like
using REST or RPC calls as a boundary between services, which is a scalable way to compose systems from many vendors.</p><p>Secondly, each <code>Actor</code> can effectively run on its own thread, with its own queue. This both enables concurrency
(which we don&#x27;t make use of in CosmWasm... yet), and <strong>serialized execution</strong> within each actor (which we do rely upon).
This means that it is impossible for the <code>Handle</code> method above to be executed in the middle of a previously
executed <code>Handle</code> call. <code>Handle</code> is a synchronous call and returns before the <code>Actor</code> can process the next message .
This feature is what <a href="/fr/docs/0.16/architecture/smart-contracts#avoiding-reentrancy-attacks">protects us from reentrancy by design</a>.</p><p>Another important aspect related to CosmWasm is <strong>locality</strong>. That is, actors can only communicate with other actors <strong>
whose address they previously received</strong>. We will go more into depth on <a href="/fr/docs/0.16/architecture/addresses">addresses and naming</a> in the next
page, but the key point is that for two actors to communicate, an external message (from the contract creator, or
potentially a user) must be sent to the actor. This is a flexible way to set up topologies in a distributed manner. The
only thing that must be hard-coded is the data format to pass to such addresses. Once some standard interfaces are
established (like ERC20, ERC721, ENS, etc), then we can support composability between large classes of contracts, with
different backing code, but sharing a common API.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="security-benefits">Security Benefits<a class="hash-link" href="#security-benefits" title="Direct link to heading">â€‹</a></h2><p>By enforcing <strong>private internal state</strong>, a given contract can guarantee all valid transitions in its internal state.
This is in contrast to the capabilities model used in Cosmos SDK, where trusted modules are passed a <code>StoreKey</code> in their
constructor, which allows <em>full read and write access to the other module&#x27;s storage</em>. In the Cosmos SDK, we can audit
the modules before calling them, and safely pass in such powerful set of rights at compile time. However, there are no
compile time checks in a smart contract system and we need to produce stricter boundaries between contracts. This allows
us to comprehensively reason over all possibles transitions in a contract&#x27;s state (and use quick-check like methods to
test it).</p><p>As mentioned above, <strong>serialized execution</strong> prevents all concurrent execution of a contract&#x27;s code. This is like an
automatic mutex over the entire contract code. This is exactly the issue that one of the most common Ethereum attacks,
reentrancy, makes use of. Contract A calls into contract B, which calls back into contract A. There may be local changes
in memory in contract A from the first call (eg. deduct a balance), which are not yet persisted, so the second call can
use the outdated state a second time (eg. authorize sending a balance twice). By enforcing serialized execution, the
contract will write all changes to storage before exiting, and have a proper view when the next message is processed.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="atomic-execution">Atomic Execution<a class="hash-link" href="#atomic-execution" title="Direct link to heading">â€‹</a></h2><p>One problem with sending messages is atomically committing a state change over two contracts. There are many cases where
we want to ensure that all returned messages were properly processed before committing our state. There are ideas like &quot;
three-phase-commit&quot; used in distributed databases, but since in the normal case, all actors are living in the same
binary, we can handle this in the <code>Keeper</code>. Before executing a Msg that came from an external transaction, we create a
SavePoint of the global data store, and pass in a subset to the first contract. We then execute all returned messages
inside the same sub-transaction. If all messages succeed, then we can commit the sub-transaction. If any fails (or we
run out of gas), we abort execution and rollback the state to before the first contract was executed.</p><p>This allows us to optimistically update code, relying on rollback for error handling. For example if an exchange matches
a trade between two &quot;ERC20&quot; tokens, it can make the offer as fulfilled and return two messages to move token A to the
buyer and token B to the seller. (ERC20 tokens use a concept of allowance, so the owner &quot;allows&quot; the exchange to move up
to X tokens from their account). When executing the returned messages, it turns out the the buyer doesn&#x27;t have
sufficient token B (or provided an insufficient allowance). This message will fail, causing the entire sequence to be
reverted. Transaction failed, the offer was not marked as fulfilled, and no tokens changed hands.</p><p>While many developers may be more comfortable thinking about directly calling the other contract in their execution path
and handling the errors, you can achieve almost all the same cases with such an <em>optimistic update and return</em> approach.
And there is no room for making mistakes in the contract&#x27;s error handling code.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="dynamically-linking-host-modules">Dynamically Linking Host Modules<a class="hash-link" href="#dynamically-linking-host-modules" title="Direct link to heading">â€‹</a></h2><p>The aspects of <strong>locality</strong> and <strong>loose coupling</strong> mean that we don&#x27;t even need to link to other CosmWasm contracts. We
can send messages to anything the Dispatcher has an address for. For example, we can return a <code>SendMsg</code>, which will be
processed by the native <code>x/supply</code> module in Cosmos SDK, moving native tokens. As we define standard interfaces for
composability, we can define interfaces to call into core modules (bond and unbond your stake...), and then pass in the
address to the native module in the contract constructor.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="inter-blockchain-messaging">Inter Blockchain Messaging<a class="hash-link" href="#inter-blockchain-messaging" title="Direct link to heading">â€‹</a></h2><p>Since the Actor model doesn&#x27;t attempt to make synchronous calls to another contract, but just returns a message &quot;to be
executed&quot;, it is a nice match for making cross-chain contract calls using <a href="https://cosmos.network/ibc" target="_blank" rel="noopener noreferrer">IBC</a>. The only
caveat here is that the <em>atomic execution</em> guarantee we provided above no longer applies here. The other call will not
be called by the same dispatcher, so we need to store an intermediate state in the contract itself. That means a state
that cannot be changed until the result of the IBC call is known, then can be safely applied or reverted.</p><p>For example, if we want to move tokens from chain A to chain B, we would first prepare a send:</p><ol><li>Contract A reduces token supply of sender</li><li>Contract A creates a &quot;escrow&quot; of those tokens linked to IBC message id, sender and receiving chain.</li><li>Contract A commits state and returns a message to initiate an IBC transaction to chain B.</li><li>If the IBC send part fails, then the contract is atomically reverted as above.</li></ol><p>After some time, a &quot;success&quot; or &quot;error&quot;/&quot;timeout&quot; message is returned from the IBC module to the token contract:</p><ol><li>Contract A validates the message came from the IBC handler (authorization) and refers to a known IBC message ID it
has in escrow.</li><li>If it was a success, the escrow is deleted and the escrowed tokens are placed in an account for &quot;Chain B&quot; (meaning
that only a future IBC message from Chain B may release them).</li><li>If it was an error, the escrow is deleted and the escrowed tokens are returned to the account of the original sender.</li></ol><p>You can imagine a similar scenario working for cases like moving NFT ownership, cross-chain staking, etc. We will expand
on these possibilities and provide tooling to help make proper design once the IBC code in Cosmos SDK is stabilized (and
included in a release), but the contract design is made with this in mind.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="credits">Credits<a class="hash-link" href="#credits" title="Direct link to heading">â€‹</a></h2><p>Much thanks to <a href="https://github.com/aaronc" target="_blank" rel="noopener noreferrer">Aaron Craelius</a>, who came up with this design of using an Actor model to
avoid reentrancy attacks.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/InterWasm/docs/edit/main/docs_versioned_docs/version-0.16/03-architecture/02-actor.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/fr/docs/0.16/architecture/multichain"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">What are Multi-Chain Contracts?</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/fr/docs/0.16/architecture/addresses"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Names and Addresses</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#security-benefits" class="table-of-contents__link toc-highlight">Security Benefits</a></li><li><a href="#atomic-execution" class="table-of-contents__link toc-highlight">Atomic Execution</a></li><li><a href="#dynamically-linking-host-modules" class="table-of-contents__link toc-highlight">Dynamically Linking Host Modules</a></li><li><a href="#inter-blockchain-messaging" class="table-of-contents__link toc-highlight">Inter Blockchain Messaging</a></li><li><a href="#credits" class="table-of-contents__link toc-highlight">Credits</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Related Documentation</div><ul class="footer__items"><li class="footer__item"><a href="https://cosmos.network/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Cosmos SDK<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://hub.cosmos.network/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Cosmos Hub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://docs.tendermint.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Tendermint Core<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Repositories</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/CosmWasm/cosmwasm" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>CosmWasm/cosmwasm<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/CosmWasm/wasmd" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>CosmWasm/wasmd<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/CosmWasm/cw-plus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>CosmWasm/cw-plus<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/InterWasm/cw-contracts" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>InterWasm/cw-contracts<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/InterWasm/cw-awesome" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>InterWasm/cw-awesome<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://medium.com/cosmwasm" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://docs.cosmwasm.com/chat/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/CosmWasm" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/InterWasm" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>InterWasm<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://cosmwasm.com" target="_blank" rel="noopener noreferrer" class="footerLogoLink_RC3H"><img src="/fr/img/logo_stacked.png" alt="CosmWasm Logo" class="themedImage_W2Cr themedImage--light_TfLj footer__logo"><img src="/fr/img/logo_stacked.png" alt="CosmWasm Logo" class="themedImage_W2Cr themedImage--dark_oUvU footer__logo"></a></div><div class="footer__copyright">Copyright Â© 2022 CosmWasm</div></div></div></footer></div>
<script src="/fr/assets/js/runtime~main.06714549.js"></script>
<script src="/fr/assets/js/main.0d6a99d9.js"></script>
</body>
</html>