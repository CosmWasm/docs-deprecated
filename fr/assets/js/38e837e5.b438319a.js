"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3115],{3905:function(e,n,t){t.d(n,{Zo:function(){return p},kt:function(){return m}});var r=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)t=s[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)t=s[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var c=r.createContext({}),i=function(e){var n=r.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},p=function(e){var n=i(e.components);return r.createElement(c.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},d=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,s=e.originalType,c=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=i(t),m=a,f=d["".concat(c,".").concat(m)]||d[m]||u[m]||s;return t?r.createElement(f,o(o({ref:n},p),{},{components:t})):r.createElement(f,o({ref:n},p))}));function m(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var s=t.length,o=new Array(s);o[0]=d;var l={};for(var c in n)hasOwnProperty.call(n,c)&&(l[c]=n[c]);l.originalType=e,l.mdxType="string"==typeof e?e:a,o[1]=l;for(var i=2;i<s;i++)o[i]=t[i];return r.createElement.apply(null,o)}return r.createElement.apply(null,t)}d.displayName="MDXCreateElement"},5271:function(e,n,t){t.r(n),t.d(n,{assets:function(){return p},contentTitle:function(){return c},default:function(){return m},frontMatter:function(){return l},metadata:function(){return i},toc:function(){return u}});var r=t(3117),a=t(102),s=(t(7294),t(3905)),o=["components"],l={sidebar_position:5},c="D\xe9fi",i={unversionedId:"basics/challenge",id:"basics/challenge",title:"D\xe9fi",description:"Here is a basic challenge to test your might using the knowledge acquired in previous chapters.",source:"@site/i18n/fr/docusaurus-plugin-content-docs-dev-academy/current/basics/05-challenge.md",sourceDirName:"basics",slug:"/basics/challenge",permalink:"/fr/dev-academy/basics/challenge",editUrl:"https://crowdin.com/project/cosmwasm-docs/fr",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"devAcademy",previous:{title:"Configuration de l'environnement",permalink:"/fr/dev-academy/basics/environment"},next:{title:"FAQ",permalink:"/fr/dev-academy/basics/faq"}},p={},u=[{value:"Performing a transaction using CosmJS CLI",id:"performing-a-transaction-using-cosmjs-cli",level:2}],d={toc:u};function m(e){var n=e.components,t=(0,a.Z)(e,o);return(0,s.kt)("wrapper",(0,r.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"d\xe9fi"},"D\xe9fi"),(0,s.kt)("p",null,"Here is a basic challenge to test your might using the knowledge acquired in previous chapters."),(0,s.kt)("h2",{id:"performing-a-transaction-using-cosmjs-cli"},"Performing a transaction using CosmJS CLI"),(0,s.kt)("p",null,"Initialize the CosmJS interface session by running the following command:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"npx @cosmjs/cli@^0.26 --init https://raw.githubusercontent.com/InterWasm/cw-plus-helpers/main/base.ts --init https://raw.githubusercontent.com/InterWasm/cw-plus-helpers/main/cw20-base.ts\n")),(0,s.kt)("p",null,"Import the necessary utilities."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-typescript"},'import { Bip39, Random } from "@cosmjs/crypto";\nimport { StdFee } from "@cosmjs/stargate";\nimport { Secp256k1HdWallet, coins } from "@cosmjs/amino";\n')),(0,s.kt)("p",null,'The following lines of code will set up a client that speaks to cliffnet, generate an address and then request tokens from the faucet. "password" is the password of the key file. This key is different from the wasmd key that was previously generated.'),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-typescript"},'const [senderAddress, client] = await useOptions(cliffnetOptions).setup("password");\nclient.getAccount(senderAddress);\n')),(0,s.kt)("p",null,"The response should be something similar to:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},"{\n  address: 'wasm1kfaqnxcsz6pwxyv0h468594g6g2drwxfrrwslv',\n  pubkey: null,\n  accountNumber: 326,\n  sequence: 0\n}\n")),(0,s.kt)("p",null,"Check to see if the wallet address has ",(0,s.kt)("em",{parentName:"p"},"upebbles")," in it."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-typescript"},'client.getBalance(senderAddress,"upebble");\n')),(0,s.kt)("p",null,"The response should be as follows:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},"{ denom: 'upebble', amount: '100000000' }\n")),(0,s.kt)("p",null,"Now, executing the following lines of code, create a recipient wallet address from a random mnemonic and observe that it has no upebbles initially."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-typescript"},'const wallet = await Secp256k1HdWallet.fromMnemonic(Bip39.encode(Random.getBytes(24)).toString(),{prefix: "wasm"});\nconst [{ address: recipientAddress, pubkey }] = await wallet.getAccounts();\nconsole.info("Recipient Address:", recipientAddress);\nclient.getBalance(recipientAddress,"upebble");\n')),(0,s.kt)("p",null,"The response should be as follows:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},"{ denom: 'upebble', amount: '0' }\n")),(0,s.kt)("p",null,"Finally, a ",(0,s.kt)("em",{parentName:"p"},"send message")," can be formed piece-by-piece and broadcasted to perform the transaction as follows:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-typescript"},'const memo = "My very first tx!";\n\nconst msgSend = {fromAddress: senderAddress, toAddress: recipientAddress, amount: coins(10000000, "upebble"),};\n\nconst msgAny = {typeUrl: "/cosmos.bank.v1beta1.MsgSend", value: msgSend,};\n\nconst defaultFee: StdFee = { amount: [{amount: "1000000", denom: "upebble",},], gas: "89000",};\n\nconst broadcastResponse = await client.signAndBroadcast( senderAddress, [msgAny], defaultFee,  memo,);\n')),(0,s.kt)("p",null,"The transfer of funds should be complete and the recipient should have the amount of upebbles that was sent. Let us check the balances of both parties."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-typescript"},'client.getBalance(senderAddress,"upebble");\nclient.getBalance(recipientAddress,"upebble");\n')),(0,s.kt)("p",null,"The responses should be as follows:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},"{ denom: 'upebble', amount: '89000000' }\n{ denom: 'upebble', amount: '10000000' }\n")),(0,s.kt)("p",null,"The broadcast response can also be used to check if the transaction was successful. Run the following command and observe the output."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-typescript"},"console.info(broadcastResponse);\n")),(0,s.kt)("p",null,"The ",(0,s.kt)("em",{parentName:"p"},"transactionHash")," can now be carried over to the ",(0,s.kt)("a",{parentName:"p",href:"https://block-explorer.cliffnet.cosmwasm.com/"},"Cliffnet Block Explorer")," in order to examine the transaction in detail."))}m.isMDXComponent=!0}}]);