"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3193],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return m}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var i=a.createContext({}),c=function(e){var t=a.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},u=function(e){var t=c(e.components);return a.createElement(i.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,i=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),d=c(n),m=r,h=d["".concat(i,".").concat(m)]||d[m]||p[m]||o;return n?a.createElement(h,s(s({ref:t},u),{},{components:n})):a.createElement(h,s({ref:t},u))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,s=new Array(o);s[0]=d;var l={};for(var i in t)hasOwnProperty.call(t,i)&&(l[i]=t[i]);l.originalType=e,l.mdxType="string"==typeof e?e:r,s[1]=l;for(var c=2;c<o;c++)s[c]=n[c];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},5827:function(e,t,n){n.r(t),n.d(t,{assets:function(){return i},contentTitle:function(){return s},default:function(){return p},frontMatter:function(){return o},metadata:function(){return l},toc:function(){return c}});var a=n(3117),r=(n(7294),n(3905));const o={sidebar_position:3},s="Setting up Environment",l={unversionedId:"getting-started/setting-env",id:"getting-started/setting-env",title:"Setting up Environment",description:"You need an environment to run contracts. You can either run your node locally or connect to an existing network. For easy testing, the Malaga testnet is live. You can use the testnet to deploy and run your contracts.",source:"@site/docs/02-getting-started/03-setting-env.md",sourceDirName:"02-getting-started",slug:"/getting-started/setting-env",permalink:"/docs/1.0/getting-started/setting-env",draft:!1,editUrl:"https://github.com/InterWasm/docs/edit/main/docs/02-getting-started/03-setting-env.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"docsSidebar",previous:{title:"Installing Prerequisites",permalink:"/docs/1.0/getting-started/installation"},next:{title:"Downloading and Compiling a Contract",permalink:"/docs/1.0/getting-started/compile-contract"}},i={},c=[{value:"Setting up wasmd Go CLI",id:"set-up-go-cli",level:2},{value:"Export wasmd Parameters",id:"export-wasmd-parameters",level:2},{value:"Setting up the CosmJS CLI client",id:"setting-up-the-cosmjs-cli-client",level:2}],u={toc:c};function p(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"setting-up-environment"},"Setting up Environment"),(0,r.kt)("p",null,"You need an environment to run contracts. You can either run your node locally or connect to an existing network. For easy testing, the Malaga testnet is live. You can use the testnet to deploy and run your contracts."),(0,r.kt)("p",null,"To verify that the testnet is currently active, make sure the following URLs are working for you:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://rpc.malaga-420.cosmwasm.com/status"},"https://rpc.malaga-420.cosmwasm.com/status")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://faucet.malaga-420.cosmwasm.com/status"},"https://faucet.malaga-420.cosmwasm.com/status"))),(0,r.kt)("p",null,"The testnet has two native tokens set up - ",(0,r.kt)("inlineCode",{parentName:"p"},"Andaluc\xeda")," (",(0,r.kt)("inlineCode",{parentName:"p"},"uand"),") for becoming a validator and ",(0,r.kt)("inlineCode",{parentName:"p"},"M\xe1laga")," (",(0,r.kt)("inlineCode",{parentName:"p"},"umlg"),") for paying fees."),(0,r.kt)("p",null,"Available Block Explorers:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Big Dipper Block Explorer: ",(0,r.kt)("a",{parentName:"li",href:"https://block-explorer.malaga-420.cosmwasm.com"},"https://block-explorer.malaga-420.cosmwasm.com"))),(0,r.kt)("p",null,"You can use the block explorer to explore transactions, addresses, validators and contracts."),(0,r.kt)("p",null,"When interacting with the testnet, you can either use ",(0,r.kt)("inlineCode",{parentName:"p"},"wasmd")," which is a Go client, or the Node REPL. The Node REPL is recommended for contract operations, since JSON manipulation is not intuitive with the Shell/Go client."),(0,r.kt)("h2",{id:"set-up-go-cli"},"Setting up wasmd Go CLI"),(0,r.kt)("p",null,"Let's configure the ",(0,r.kt)("inlineCode",{parentName:"p"},"wasmd")," executable, point it to the testnet, create a wallet and ask for tokens from faucet:"),(0,r.kt)("p",null,"First source the network configuration for the Malaga testnet in the shell:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"source <(curl -sSL https://raw.githubusercontent.com/CosmWasm/testnets/master/malaga-420/defaults.env)\n")),(0,r.kt)("p",null,"Set up wallet addresses:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"# add wallets for testing\nwasmd keys add wallet\n\nwasmd keys add wallet2\n")),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"Running the command above will add two encrypted private keys to the wasmd keyring and display their attributes as follows:"),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre"},'- name: wallet\n  type: local\n  address: wasm1evvnsrte3rdghy506vu4c87x0s5wx0hpppqdd6\n  pubkey: \'{"@type":"/cosmos.crypto.secp256k1.PubKey","key":"A2aKoMPLbUnXkN2zJF/q4lIH/34ybelQSRTg3d9Js86T"}\'\n  mnemonic: ""\n\n\n**Important** write this mnemonic phrase in a safe place.\nIt is the only way to recover your account if you ever forget your password.\n\ntable shell potato spike paddle very asthma raise glare noodle vibrant chuckle indicate spell perfect craft step net radio yellow minor deal blur hybrid\n'))),(0,r.kt)("p",null,"You need some tokens in your address to interact with the network. If you are using local node you can skip this step. Requesting tokens from faucet:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'JSON=$(jq -n --arg addr $(wasmd keys show -a wallet) \'{"denom":"umlg","address":$addr}\') && curl -X POST --header "Content-Type: application/json" --data "$JSON" https://faucet.malaga-420.cosmwasm.com/credit\nJSON=$(jq -n --arg addr $(wasmd keys show -a wallet2) \'{"denom":"umlg","address":$addr}\') && curl -X POST --header "Content-Type: application/json" --data "$JSON" https://faucet.malaga-420.cosmwasm.com/credit\n')),(0,r.kt)("h2",{id:"export-wasmd-parameters"},"Export wasmd Parameters"),(0,r.kt)("p",null,"wasmd client requires to be further configured in order to interact with different testnets. Each testnet has its own endpoints and system parameters."),(0,r.kt)("p",null,"An effective way to configure wasmd is to define the following environment variables, making use of the network configuration parameters we sourced earlier."),(0,r.kt)("p",null,"If you intend to use wasmd as your preferred client, we recommend you to set up these variables. Otherwise you will have to type in node, chain id and gas-price details with every command you execute."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'# bash\nexport NODE="--node $RPC"\nexport TXFLAG="${NODE} --chain-id ${CHAIN_ID} --gas-prices 0.25${FEE_DENOM} --gas auto --gas-adjustment 1.3"\n\n# zsh\nexport NODE=(--node $RPC)\nexport TXFLAG=($NODE --chain-id $CHAIN_ID --gas-prices 0.25$FEE_DENOM --gas auto --gas-adjustment 1.3)\n')),(0,r.kt)("p",null,"If the commands above throws an error, it means you are utilizing a different type of shell. If there are no errors, try executing the following command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"wasmd query bank total $NODE\n")),(0,r.kt)("p",null,"A response similar to the one below means that you can now interact with the node you have configured."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'pagination:\n  next_key: null\n  total: "2"\nsupply:\n- amount: "10006916235913"\n  denom: uand\n- amount: "10000000000000"\n  denom: umlg\n')),(0,r.kt)("p",null,"You can check that your credit request from the faucet has been successful by checking the balance of your wallet addresses by running the following commands:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"wasmd query bank balances $(wasmd keys show -a wallet) $NODE\nwasmd query bank balances $(wasmd keys show -a wallet2) $NODE\n")),(0,r.kt)("p",null,"You can explore the details about various other wasmd commands by running"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"wasmd help\n")),(0,r.kt)("h2",{id:"setting-up-the-cosmjs-cli-client"},"Setting up the CosmJS CLI client"),(0,r.kt)("p",null,"Beyond the standard CLI tooling, ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/CosmWasm/cosmjs"},"CosmJS")," was developed as a flexible TypeScript library, which runs in Node.js as well as in modern browsers. Among other capabilities, the library supports smart contract queries and transactions. Along with this library, the ",(0,r.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/@cosmjs/cli"},"@cosmjs/cli")," was developed to act as a super-charged Node console. It supports the keyword ",(0,r.kt)("inlineCode",{parentName:"p"},"await"),", does type checking for helpful error messages, and preloads many CosmJS utilities. If you are comfortable with the Node console, you will probably find CosmJS CLI easier and more powerful than the wasmd Go CLI tooling."),(0,r.kt)("p",null,"To initialize a CosmJS CLI session, ",(0,r.kt)("a",{parentName:"p",href:"https://nodejs.org/en/download/"},"node.js 12+")," and ",(0,r.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/npx"},"npx")," must be installed first."),(0,r.kt)("p",null,"Run the following command to start the Node REPL:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"npx @cosmjs/cli@^0.28.1 --init https://raw.githubusercontent.com/InterWasm/cw-plus-helpers/main/base.ts --init https://raw.githubusercontent.com/InterWasm/cw-plus-helpers/main/cw20-base.ts\n")),(0,r.kt)("p",null,"With that, you should observe the initialization of an interactive session."),(0,r.kt)("p",null,"Now, let us create a new wallet account, display the address and check the account balance."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'// Create or load account\nconst [address, client] = await useOptions(malagaOptions).setup("password",".new.key");\n// Display the wallet address\nclient.getAccount(address);\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"{\n  address: 'wasm1llrnvtvhe5up6erf7mv7uh35efea567f5gejjr',\n  pubkey: null,\n  accountNumber: 53,\n  sequence: 0\n}\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'// Check the wallet balance\nclient.getBalance(address,"umlg")\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"{ denom: 'umlg', amount: '100000000' }\n")))}p.isMDXComponent=!0}}]);